---
phase: 04-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - scripts/autoresponder.sh
  - scripts/hook-watcher.sh
  - /home/forge/.claude/hooks/gsd-session-hook.sh
  - SKILL.md
  - PRD.md
  - .planning/PROJECT.md
autonomous: true
requirements: [CLEAN-01, CLEAN-02, CLEAN-03]

must_haves:
  truths:
    - "autoresponder.sh no longer exists in scripts directory"
    - "hook-watcher.sh no longer exists in scripts directory"
    - "gsd-session-hook.sh no longer exists in ~/.claude/hooks/"
    - "SKILL.md has no references to --autoresponder flag or autoresponder.sh"
    - "PRD.md marks deleted scripts as removed/obsolete in relevant sections"
    - "PROJECT.md no longer lists autoresponder.sh and hook-watcher.sh as validated requirements"
    - "No active documentation contains stale references that imply deleted scripts still exist"
  artifacts:
    - path: "SKILL.md"
      provides: "Updated skill documentation without obsolete script references"
    - path: "PRD.md"
      provides: "Updated PRD with deleted scripts marked as removed"
    - path: ".planning/PROJECT.md"
      provides: "Updated project overview without obsolete validated requirements"
  key_links:
    - from: "scripts/"
      to: "SKILL.md"
      via: "script documentation"
      pattern: "autoresponder|hook-watcher"
    - from: "scripts/"
      to: "PRD.md"
      via: "architecture documentation"
      pattern: "autoresponder|hook-watcher|gsd-session-hook"
---

<objective>
Delete three obsolete polling scripts (autoresponder.sh, hook-watcher.sh, gsd-session-hook.sh) and fix all dangling references in active documentation files.

Purpose: These scripts were replaced by the event-driven hook system in Phases 1-3. Leaving dead code and stale references creates confusion and maintenance burden.
Output: Clean codebase with no obsolete polling scripts and no broken documentation references.
</objective>

<execution_context>
@/home/forge/.claude/get-shit-done/workflows/execute-plan.md
@/home/forge/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-cleanup/04-CONTEXT.md
@.planning/phases/04-cleanup/04-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Delete obsolete polling scripts</name>
  <files>scripts/autoresponder.sh, scripts/hook-watcher.sh, /home/forge/.claude/hooks/gsd-session-hook.sh</files>
  <action>
Delete three obsolete scripts that have been replaced by the event-driven hook system:

1. Run `git rm scripts/autoresponder.sh` to remove the git-tracked autoresponder polling script
2. Run `git rm scripts/hook-watcher.sh` to remove the git-tracked hook-watcher polling script
3. Run `rm /home/forge/.claude/hooks/gsd-session-hook.sh` to remove the untracked SessionStart hook launcher (outside this git repo, so plain `rm` not `git rm`)

Per user decision: Do NOT kill running processes (let them die naturally). Do NOT clean up /tmp watcher state files (let them disappear on reboot). No pkill commands. No custom cleanup scripts.
  </action>
  <verify>
Run: `ls scripts/autoresponder.sh scripts/hook-watcher.sh /home/forge/.claude/hooks/gsd-session-hook.sh 2>&1` — all three should report "No such file or directory".
Run: `git status` — should show two deleted files staged (autoresponder.sh, hook-watcher.sh).
  </verify>
  <done>All three obsolete scripts deleted. autoresponder.sh and hook-watcher.sh removed via git rm (staged for commit). gsd-session-hook.sh removed via rm (not git-tracked).</done>
</task>

<task type="auto">
  <name>Task 2: Fix dangling references in active documentation</name>
  <files>SKILL.md, PRD.md, .planning/PROJECT.md</files>
  <action>
Grep the codebase for remaining references to deleted script names, then classify and fix them. Reference classification:

**Historical documentation (KEEP AS-IS — do not modify):**
All files under `.planning/phases/01-*/`, `02-*/`, `03-*/`, `.planning/research/`, `.planning/quick/`, `.planning/debug/`, `.planning/STATE.md`, and `.planning/phases/04-cleanup/04-CONTEXT.md` and `04-RESEARCH.md`. These are historical records of past work and decisions.

**Active scripts (VERIFY ONLY — should already be clean):**
`scripts/register-hooks.sh` references gsd-session-hook.sh functionally (it filters the old hook from settings.json). This is correct behavior, not a stale reference. Leave it.

**Active documentation (FIX — these are the targets):**

1. **SKILL.md** — Three changes needed:
   a. Line 26: Remove `[--autoresponder]` from the spawn.sh usage signature. New signature: `scripts/spawn.sh <session-name> <workdir> [--prd <path>]`
   b. Lines 42-43: Remove the two lines about `--autoresponder` starting autoresponder.sh:
      - Remove: `- optional: \`--autoresponder\` starts local deterministic responder loop (\`scripts/autoresponder.sh\`) for fully local auto-navigation (no heartbeat/cron token burn)`
      - Remove: `- default mode keeps the agent-in-the-loop; use \`scripts/menu-driver.sh\` as deterministic TUI helper called by the agent after hook wake events`
      (Replace both lines with a single line: `- Hook-driven event system handles agent control; use \`scripts/menu-driver.sh\` as deterministic TUI helper for agent-driven menu navigation`)

2. **PRD.md** — Two changes needed in the "Changes" section:
   a. Items 13-15 (DELETE sections for autoresponder.sh, hook-watcher.sh, gsd-session-hook.sh): Add "(COMPLETED — deleted in Phase 4)" after each "DELETE:" heading
   b. Phase 4 description in "Implementation Phases" section: Update from "kill existing hook-watcher processes via pkill, remove watcher state files from /tmp" to "Let old processes die naturally, let /tmp files disappear on reboot" (matching user decisions)

3. **PROJECT.md** — Two changes needed in the "Validated" requirements section:
   a. Remove or update the line: `- autoresponder.sh — Local heuristic-based menu responder (to be replaced)` → change to `- ~~autoresponder.sh~~ — Removed in Phase 4 (replaced by event-driven hooks)`
   b. Remove or update the line: `- hook-watcher.sh — Polling-based menu detection with OpenClaw wake (to be replaced)` → change to `- ~~hook-watcher.sh~~ — Removed in Phase 4 (replaced by event-driven hooks)`

**ROADMAP.md** — Update will be handled by the planner (plan count and plan list). Do not modify success criteria (they are the historical record of what was planned; actual outcomes are documented in VERIFICATION.md and SUMMARY.md).

After making all edits, re-grep the codebase to confirm no active documentation still contains stale references implying deleted scripts exist as current/usable components.
  </action>
  <verify>
Run grep for all three script names across the repo. Verify:
1. Zero references in SKILL.md to `autoresponder` or `--autoresponder`
2. PRD.md DELETE sections marked as completed
3. PROJECT.md validated section shows scripts as removed
4. All remaining references are in historical documentation (planning phases, research) or functional code (register-hooks.sh)
  </verify>
  <done>All active documentation updated. SKILL.md has no autoresponder references. PRD.md marks deleted scripts as completed. PROJECT.md shows scripts as removed. No stale references remain in active documentation that imply deleted scripts still exist.</done>
</task>

</tasks>

<verification>
1. `ls scripts/autoresponder.sh scripts/hook-watcher.sh /home/forge/.claude/hooks/gsd-session-hook.sh 2>&1` — all report "No such file or directory"
2. `grep -r "autoresponder" SKILL.md` — returns nothing
3. `grep -r "autoresponder\|hook-watcher\|gsd-session-hook" SKILL.md .planning/PROJECT.md` — only shows "Removed in Phase 4" annotations, not active references
4. `grep -rn "autoresponder\.sh\|hook-watcher\.sh" scripts/` — returns nothing (no script files reference deleted scripts, register-hooks.sh only references gsd-session-hook which is functional)
</verification>

<success_criteria>
- Three obsolete scripts deleted (autoresponder.sh via git rm, hook-watcher.sh via git rm, gsd-session-hook.sh via rm)
- SKILL.md updated: no --autoresponder flag, no autoresponder.sh references
- PRD.md updated: DELETE sections marked as completed in Phase 4
- PROJECT.md updated: obsolete scripts marked as removed
- No active documentation contains stale references implying deleted scripts are current
</success_criteria>

<output>
After completion, create `.planning/phases/04-cleanup/04-01-SUMMARY.md`
</output>
